<!-- frontend/src/app/pages/analytics/analytics.component.html -->
<div class="space-y-5">
	<!-- Controls -->
	<div class="flex flex-wrap items-center gap-3">
		<div class="ml-auto flex items-center gap-4 text-sm">
			<div class="flex items-center gap-2">
				<label for="pnl-axis">PnL axis</label>
				<select id="pnl-axis" class="p-inputtext" [ngModel]="yMode()" (ngModelChange)="onAxisModeChange($event)">
					<option value="pct">PnL %</option>
					<option value="usd">PnL USD</option>
				</select>
			</div>

			<div class="flex items-center gap-2">
				<p-checkbox binary="true" [ngModel]="showTrend()" (ngModelChange)="onToggleTrend($event)"></p-checkbox>
				<span>Trend</span>
			</div>

			<div class="flex items-center gap-2">
				<p-checkbox binary="true" [ngModel]="showQLines()" (ngModelChange)="onToggleQLines($event)"></p-checkbox>
				<span>Q1 & Q3</span>
			</div>

			<div class="flex items-center gap-2">
				<p-checkbox binary="true" [ngModel]="logX()" (ngModelChange)="onToggleLogX($event)"></p-checkbox>
				<span>Log X</span>
			</div>
		</div>
	</div>

	<h1 class="m-0 text-2xl font-bold">Scores</h1>
	<hr class="h-px my-4 bg-gray-500 border-0">
	<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
		<div inViewport (inViewportChange)="onViewport('final', $event)">
			<p-card>
				<ng-template pTemplate="title">Final score ↔ PnL</ng-template>
				<apx-chart
						[series]="finalSeries" [chart]="finalChart" [xaxis]="finalXAxis" [yaxis]="finalYAxis"
						[stroke]="finalStroke" [fill]="finalFill" [grid]="finalGrid" [legend]="finalLegend"
						[tooltip]="finalTooltip" [markers]="finalMarkers" [dataLabels]="finalDataLabels"
						[annotations]="finalAnn"
				></apx-chart>
			</p-card>
		</div>

		<div inViewport (inViewportChange)="onViewport('quality', $event)">
			<p-card>
				<ng-template pTemplate="title">Quality score ↔ PnL</ng-template>
				<apx-chart
						[series]="qualitySeries" [chart]="qualityChart" [xaxis]="qualityXAxis" [yaxis]="qualityYAxis"
						[stroke]="qualityStroke" [fill]="qualityFill" [grid]="qualityGrid" [legend]="qualityLegend"
						[tooltip]="qualityTooltip" [markers]="qualityMarkers" [dataLabels]="qualityDataLabels"
						[annotations]="qualityAnn"
				></apx-chart>
			</p-card>
		</div>
	</div>

	<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
		<div inViewport (inViewportChange)="onViewport('statistics', $event)">
			<p-card>
				<ng-template pTemplate="title">Statistics score ↔ PnL</ng-template>
				<apx-chart
						[series]="statisticsSeries" [chart]="statisticsChart" [xaxis]="statisticsXAxis" [yaxis]="statisticsYAxis"
						[stroke]="statisticsStroke" [fill]="statisticsFill" [grid]="statisticsGrid" [legend]="statisticsLegend"
						[tooltip]="statisticsTooltip" [markers]="statisticsMarkers" [dataLabels]="statisticsDataLabels"
						[annotations]="statisticsAnn"
				></apx-chart>
			</p-card>
		</div>

		<div inViewport (inViewportChange)="onViewport('entry', $event)">
			<p-card>
				<ng-template pTemplate="title">Entry score ↔ PnL</ng-template>
				<apx-chart
						[series]="entrySeries" [chart]="entryChart" [xaxis]="entryXAxis" [yaxis]="entryYAxis"
						[stroke]="entryStroke" [fill]="entryFill" [grid]="entryGrid" [legend]="entryLegend"
						[tooltip]="entryTooltip" [markers]="entryMarkers" [dataLabels]="entryDataLabels"
						[annotations]="entryAnn"
				></apx-chart>
			</p-card>
		</div>
	</div>

	<hr class="w-48 h-1 mx-auto my-4 bg-gray-500 border-0 rounded-sm md:my-10">

	<h1 class="m-0 text-2xl font-bold">Market</h1>
	<hr class="h-px my-4 bg-gray-500 border-0">
	<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
		<div inViewport (inViewportChange)="onViewport('liq', $event)">
			<p-card>
				<ng-template pTemplate="title">Liquidity ($, log X) ↔ PnL</ng-template>
				<apx-chart
						[series]="liqSeries" [chart]="liqChart" [xaxis]="liqXAxis" [yaxis]="liqYAxis"
						[stroke]="liqStroke" [fill]="liqFill" [grid]="liqGrid" [legend]="liqLegend"
						[tooltip]="liqTooltip" [markers]="liqMarkers" [dataLabels]="liqDataLabels"
						[annotations]="liqAnn"
				></apx-chart>
			</p-card>
		</div>

		<div inViewport (inViewportChange)="onViewport('vol', $event)">
			<p-card>
				<ng-template pTemplate="title">Volume 24h ($, log X) ↔ PnL</ng-template>
				<apx-chart
						[series]="volSeries" [chart]="volChart" [xaxis]="volXAxis" [yaxis]="volYAxis"
						[stroke]="volStroke" [fill]="volFill" [grid]="volGrid" [legend]="volLegend"
						[tooltip]="volTooltip" [markers]="volMarkers" [dataLabels]="volDataLabels"
						[annotations]="volAnn"
				></apx-chart>
			</p-card>
		</div>
	</div>

	<hr class="w-48 h-1 mx-auto my-4 bg-gray-500 border-0 rounded-sm md:my-10">

	<h1 class="m-0 text-2xl font-bold">Momentum</h1>
	<hr class="h-px my-4 bg-gray-500 border-0">
	<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
		<div inViewport (inViewportChange)="onViewport('p5m', $event)">
			<p-card>
				<ng-template pTemplate="title">Δ5m ↔ PnL</ng-template>
				<apx-chart
						[series]="p5mSeries" [chart]="p5mChart" [xaxis]="p5mXAxis" [yaxis]="p5mYAxis"
						[stroke]="p5mStroke" [fill]="p5mFill" [grid]="p5mGrid" [legend]="p5mLegend"
						[tooltip]="p5mTooltip" [markers]="p5mMarkers" [dataLabels]="p5mDataLabels"
						[annotations]="p5mAnn"
				></apx-chart>
			</p-card>
		</div>

		<div inViewport (inViewportChange)="onViewport('p1h', $event)">
			<p-card>
				<ng-template pTemplate="title">Δ1h ↔ PnL</ng-template>
				<apx-chart
						[series]="p1hSeries" [chart]="p1hChart" [xaxis]="p1hXAxis" [yaxis]="p1hYAxis"
						[stroke]="p1hStroke" [fill]="p1hFill" [grid]="p1hGrid" [legend]="p1hLegend"
						[tooltip]="p1hTooltip" [markers]="p1hMarkers" [dataLabels]="p1hDataLabels"
						[annotations]="p1hAnn"
				></apx-chart>
			</p-card>
		</div>
	</div>
	<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
		<div inViewport (inViewportChange)="onViewport('p6h', $event)">
			<p-card>
				<ng-template pTemplate="title">Δ6h ↔ PnL</ng-template>
				<apx-chart
						[series]="p6hSeries" [chart]="p6hChart" [xaxis]="p6hXAxis" [yaxis]="p6hYAxis"
						[stroke]="p6hStroke" [fill]="p6hFill" [grid]="p6hGrid" [legend]="p6hLegend"
						[tooltip]="p6hTooltip" [markers]="p6hMarkers" [dataLabels]="p6hDataLabels"
						[annotations]="p6hAnn"
				></apx-chart>
			</p-card>
		</div>

		<div inViewport (inViewportChange)="onViewport('p24h', $event)">
			<p-card>
				<ng-template pTemplate="title">Δ24h ↔ PnL</ng-template>
				<apx-chart
						[series]="p24hSeries" [chart]="p24hChart" [xaxis]="p24hXAxis" [yaxis]="p24hYAxis"
						[stroke]="p24hStroke" [fill]="p24hFill" [grid]="p24hGrid" [legend]="p24hLegend"
						[tooltip]="p24hTooltip" [markers]="p24hMarkers" [dataLabels]="p24hDataLabels"
						[annotations]="p24hAnn"
				></apx-chart>
			</p-card>
		</div>
	</div>

	<hr class="w-48 h-1 mx-auto my-4 bg-gray-500 border-0 rounded-sm md:my-10">

	<h1 class="m-0 text-2xl font-bold">Age and transactions</h1>
	<hr class="h-px my-4 bg-gray-500 border-0">
	<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
		<div inViewport (inViewportChange)="onViewport('age', $event)">
			<p-card>
				<ng-template pTemplate="title">Token age (h, log X) ↔ PnL</ng-template>
				<apx-chart
						[series]="ageSeries" [chart]="ageChart" [xaxis]="ageXAxis" [yaxis]="ageYAxis"
						[stroke]="ageStroke" [fill]="ageFill" [grid]="ageGrid" [legend]="ageLegend"
						[tooltip]="ageTooltip" [markers]="ageMarkers" [dataLabels]="ageDataLabels"
						[annotations]="ageAnn"
				></apx-chart>
			</p-card>
		</div>

		<div inViewport (inViewportChange)="onViewport('tx', $event)">
			<p-card>
				<ng-template pTemplate="title">Transactions 24h (log X) ↔ PnL</ng-template>
				<apx-chart
						[series]="txSeries" [chart]="txChart" [xaxis]="txXAxis" [yaxis]="txYAxis"
						[stroke]="txStroke" [fill]="txFill" [grid]="txGrid" [legend]="txLegend"
						[tooltip]="txTooltip" [markers]="txMarkers" [dataLabels]="txDataLabels"
						[annotations]="txAnn"
				></apx-chart>
			</p-card>
		</div>
	</div>
</div>
